{"paragraphs":[{"text":"%angular\n<div id=\"fps_exception_report\">\n    <form name=\"searchExceptionForm\" id=\"searchExceptionForm\">\n        <div class=\"form-group\">\n        \n            <div class=\"row\">\n                <div class=\"col-xs-3 form-group\">\n                    <label for=\"startDate\">Start Date: </label>\n                    <input class=\"form-control\" type=\"date\" name=\"startDate\" id=\"startDate\" ng-model=\"data.startDate\"></input>                    \n                </div>\n                <div class=\"col-xs-3 form-group\">\n                    <label for=\"endDate\">End Date: </label>\n                    <input class=\"form-control\" type=\"date\" name=\"endDate\" id=\"endDate\" ng-model=\"data.endDate\"></input>\n                </div>\n            </div>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"doQuery()\"> Search</button>\n    </form>\n    <div class=\"clear-form-button\">\n        <button class=\"btn\" ng-click=\"clearForm()\">Clear Form</button>\n    </div>\n</div>\n<script>\n\n    angular.element(document).ready(function () {\n        console.log('init');\n        init_fps_exception_report();\n    });\n\n    function init_fps_exception_report(){\n\n    console.log('init total report');\n    var scope = angular.element($(\"#fps_exception_report\")).scope();\n\n    scope.queryString = \"\";\n    scope.data = {};\n    \n    scope.clearForm = function(){\n        var scope = angular.element($(\"#fps_exception_report\")).scope();\n        scope.data = {};\n    }\n    \n    scope.doQuery = function(){\n        var scope = angular.element($(\"#fps_exception_report\")).scope();\n         var startDateQuery = \"\";\n        var endDateQuery = \"\";\n        if (scope.data.startDate != \"\" && scope.data.startDate != null) {\n            var startDateElement = document.getElementById('startDate').value;            \n            startDateQuery = \"\\'\" + startDateElement + \"\\'\";\n        }\n        if (scope.data.endDate != \"\" && scope.data.endDate != null) {\n            var endDateElement = document.getElementById('endDate').value;\n            endDateQuery = \"\\'\" + endDateElement + \"\\'\";\n            \n        }\n\n\n        var values = [startDateQuery,  endDateQuery];\n\n        var queryFields = ['\"settelment_date\" >= ', '\"settelment_date\" <= '];\n        \n        var queryValues = queryFields.map(function(e, i) {\n            var field = e;\n            var value = values[i]\n            if (value === null || typeof(value) == 'undefined' || value === \"\" || value == \"'%%'\"){\n                return \"\";\n            }\n            return e + 'TO_TIMESTAMP('+value+')';\n        });\n        var notEmptyQueryValues = queryValues.filter(function check(c) { if (c === \"\") {return false} return true });\n        \n        var queryString = \"\";\n        if (notEmptyQueryValues.length != 0){\n            queryString =  \"WHERE \"+notEmptyQueryValues.join(\" and \");\n        }\n        scope.queryString = queryString;\n        console.log('QUERY: ',scope.queryString);\n        scope.z.angularBind('searchFPSExceptionReportQuery', scope.queryString,'20181130-140407_173260110');\n        scope.z.runParagraph('20181130-140407_173260110');\n        \n\n    }\n}\n\n\n\n</script>\n<style media=\"screen\" type=\"text/css\">\n    .clear-form-button{\n        display: inline;\n        float: right;\n    }\n\n#fps_total_report {\n    width: 98%;\n}\n</style>","user":"admin","dateUpdated":"2018-12-04T21:14:59+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"editOnDblClick":true,"language":"sql"},"editorMode":"ace/mode/undefined","editorHide":true,"tableHide":false,"fontSize":9},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"ANGULAR","data":"<div id=\"fps_exception_report\">\n    <form name=\"searchExceptionForm\" id=\"searchExceptionForm\">\n        <div class=\"form-group\">\n        \n            <div class=\"row\">\n                <div class=\"col-xs-3 form-group\">\n                    <label for=\"startDate\">Start Date: </label>\n                    <input class=\"form-control\" type=\"date\" name=\"startDate\" id=\"startDate\" ng-model=\"data.startDate\"></input>                    \n                </div>\n                <div class=\"col-xs-3 form-group\">\n                    <label for=\"endDate\">End Date: </label>\n                    <input class=\"form-control\" type=\"date\" name=\"endDate\" id=\"endDate\" ng-model=\"data.endDate\"></input>\n                </div>\n            </div>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\" ng-click=\"doQuery()\"> Search</button>\n    </form>\n    <div class=\"clear-form-button\">\n        <button class=\"btn\" ng-click=\"clearForm()\">Clear Form</button>\n    </div>\n</div>\n<script>\n\n    angular.element(document).ready(function () {\n        console.log('init');\n        init_fps_exception_report();\n    });\n\n    function init_fps_exception_report(){\n\n    console.log('init total report');\n    var scope = angular.element($(\"#fps_exception_report\")).scope();\n\n    scope.queryString = \"\";\n    scope.data = {};\n    \n    scope.clearForm = function(){\n        var scope = angular.element($(\"#fps_exception_report\")).scope();\n        scope.data = {};\n    }\n    \n    scope.doQuery = function(){\n        var scope = angular.element($(\"#fps_exception_report\")).scope();\n         var startDateQuery = \"\";\n        var endDateQuery = \"\";\n        if (scope.data.startDate != \"\" && scope.data.startDate != null) {\n            var startDateElement = document.getElementById('startDate').value;            \n            startDateQuery = \"\\'\" + startDateElement + \"\\'\";\n        }\n        if (scope.data.endDate != \"\" && scope.data.endDate != null) {\n            var endDateElement = document.getElementById('endDate').value;\n            endDateQuery = \"\\'\" + endDateElement + \"\\'\";\n            \n        }\n\n\n        var values = [startDateQuery,  endDateQuery];\n\n        var queryFields = ['\"settelment_date\" >= ', '\"settelment_date\" <= '];\n        \n        var queryValues = queryFields.map(function(e, i) {\n            var field = e;\n            var value = values[i]\n            if (value === null || typeof(value) == 'undefined' || value === \"\" || value == \"'%%'\"){\n                return \"\";\n            }\n            return e + 'TO_TIMESTAMP('+value+')';\n        });\n        var notEmptyQueryValues = queryValues.filter(function check(c) { if (c === \"\") {return false} return true });\n        \n        var queryString = \"\";\n        if (notEmptyQueryValues.length != 0){\n            queryString =  \"WHERE \"+notEmptyQueryValues.join(\" and \");\n        }\n        scope.queryString = queryString;\n        console.log('QUERY: ',scope.queryString);\n        scope.z.angularBind('searchFPSExceptionReportQuery', scope.queryString,'20181130-140407_173260110');\n        scope.z.runParagraph('20181130-140407_173260110');\n        \n\n    }\n}\n\n\n\n</script>\n<style media=\"screen\" type=\"text/css\">\n    .clear-form-button{\n        display: inline;\n        float: right;\n    }\n\n#fps_total_report {\n    width: 98%;\n}\n</style>"}]},"apps":[],"jobName":"paragraph_1543591826069_730490249","id":"20181130-153026_334647013","dateCreated":"2018-11-30T15:30:26+0000","dateStarted":"2018-12-04T21:14:59+0000","dateFinished":"2018-12-04T21:14:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:48429"},{"text":"%jdbc(phoenix)\nselect \"settelment_date\" as \"Date Settlmnt\", \"cycle_id\" as \"Cycle Id\",\"debtor_stortcode\" as \"Debtor Sort Code\",\"debtor_account\" as \"Debtor Account Number\",\"creditor_sortcode\" as \"Creditor sort Code\",\"creditor_account\" as \"Creditor Account Number\",\"amount\" as \"Amount\",\"currency\" as \"Currency\",\"fpid\" as \"FPID\", \"payment_id\" as \"Internal ipagoo Unique Id\",\"customer_reference\" as \"Customer Reference\",\"status\" as \"Status of Payment\",\"failure_reason\" as \"Failure Reason\",\"credit_debit_ind\" as \"Payment C / D\", \"direction\" as \"Direction\" from FPS_REPORT_EXCEPTIONS ${searchFPSExceptionReportQuery}  order by \"creditor_sortcode\",\"settelment_date\",\"cycle_id\", \"debtor_stortcode\"","user":"admin","dateUpdated":"2018-12-26T16:01:10+0000","config":{"colWidth":12,"enabled":true,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"Date Settlmnt":"string","Cycle Id":"string","Debtor Sort Code":"string","Debtor Account Number":"string","Creditor sort Code":"string","Creditor Account Number":"string","Amount":"string","Currency":"string","FPID":"string","Internal ipagoo Unique Id":"string","Customer Reference":"string","Status of Payment":"string","Failure Reason":"string","Payment C / D":"string","Direction":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"editorSetting":{"editOnDblClick":false,"language":"sql","completionSupport":true},"editorMode":"ace/mode/sql","editorHide":true,"fontSize":9},"settings":{"params":{"searchFPSExceptionReportQuery":""},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"Date Settlmnt\tCycle Id\tDebtor Sort Code\tDebtor Account Number\tCreditor sort Code\tCreditor Account Number\tAmount\tCurrency\tFPID\tInternal ipagoo Unique Id\tCustomer Reference\tStatus of Payment\tFailure Reason\tPayment C / D\tDirection\n2018-12-03 00:00:00.000\t20181203002\t400328\t12345678\t040082\t80956892\t20.1\tGBP\tFPS181203R000008  1020181010826400000     \t127745228780371968\tHAPPY BIRTHDAY\tEXCEPTION\t1-FPS_ERROR_VALIDATION\tC\tI\n"}]},"apps":[],"jobName":"paragraph_1543590682074_-1224302897","id":"20181130-140407_173260110","dateCreated":"2018-11-30T15:11:22+0000","dateStarted":"2018-12-26T16:01:10+0000","dateFinished":"2018-12-26T16:01:10+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:48430"},{"user":"admin","dateUpdated":"2018-12-04T18:09:06+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"editOnDblClick":false,"language":"sql","completionSupport":true},"editorMode":"ace/mode/sql","fontSize":9},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1543920729064_-1387504403","id":"20181204-105209_133892027","dateCreated":"2018-12-04T10:52:09+0000","status":"READY","progressUpdateIntervalMs":500,"$$hashKey":"object:48431"}],"name":"Development/Jorge/R4.D/Reports/FPS Exceptions Report","id":"2DYUDJDSJ","noteParams":{},"noteForms":{},"angularObjects":{"angular:shared_process":[],"jdbc:shared_process":[{"name":"searchFPSExceptionReportQuery","object":"WHERE \"settelment_date\" >= TO_TIMESTAMP('2018-12-02')","noteId":"2DYUDJDSJ","paragraphId":"20181130-140407_173260110"}],"spark:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}